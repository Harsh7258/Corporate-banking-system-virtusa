<div class="credit-modal">
  
  <!-- Modal Header -->
  <div class="modal-header">
    <div class="header-content">
      <mat-icon class="header-icon">request_quote</mat-icon>
      <div>
        <h2>Create Credit Request</h2>
        <p>For {{ client.companyName }}</p>
      </div>
    </div>
    <button mat-icon-button class="close-btn" (click)="close()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Client Info Summary -->
  <div class="client-info">
    <div class="info-item">
      <mat-icon>business</mat-icon>
      <span>{{ client.companyName }}</span>
    </div>
    <div class="info-item">
      <mat-icon>category</mat-icon>
      <span>{{ client.industry }}</span>
    </div>
    <div class="info-item">
      <mat-icon>account_balance_wallet</mat-icon>
      <span>Turnover: ₹{{ client.annualTurnover }}M</span>
    </div>
  </div>

  <!-- Credit Request Form -->
  <form [formGroup]="creditForm" (ngSubmit)="onSubmit()" class="credit-form">
    
    <!-- Request Amount -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Request Amount (₹)</mat-label>
      <input 
        matInput 
        type="number" 
        formControlName="requestAmount"
        placeholder="Enter amount"
      />
      <mat-icon matPrefix>currency_rupee</mat-icon>
      <mat-error *ngIf="requestAmount?.hasError('required')">
        Amount is required
      </mat-error>
      <mat-error *ngIf="requestAmount?.hasError('min')">
        Minimum amount is ₹1,000
      </mat-error>
    </mat-form-field>

    <!-- Tenure Months -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Tenure (Months)</mat-label>
      <input 
        matInput 
        type="number" 
        formControlName="tenureMonths"
        placeholder="Enter tenure in months"
      />
      <mat-icon matPrefix>schedule</mat-icon>
      <mat-error *ngIf="tenureMonths?.hasError('required')">
        Tenure is required
      </mat-error>
      <mat-error *ngIf="tenureMonths?.hasError('min')">
        Minimum tenure is 1 month
      </mat-error>
      <mat-error *ngIf="tenureMonths?.hasError('max')">
        Maximum tenure is 360 months
      </mat-error>
    </mat-form-field>

    <!-- Purpose -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Purpose</mat-label>
      <textarea 
        matInput 
        formControlName="purpose"
        rows="4"
        placeholder="Describe the purpose of credit request"
      ></textarea>
      <mat-icon matPrefix>description</mat-icon>
      <mat-error *ngIf="purpose?.hasError('required')">
        Purpose is required
      </mat-error>
      <mat-error *ngIf="purpose?.hasError('minlength')">
        Purpose must be at least 10 characters
      </mat-error>
      <mat-error *ngIf="purpose?.hasError('maxlength')">
        Purpose cannot exceed 500 characters
      </mat-error>
    </mat-form-field>

    <!-- Action Buttons -->
    <div class="form-actions">
      <button 
        type="button" 
        mat-stroked-button 
        class="cancel-btn"
        (click)="close()"
        [disabled]="loading">
        Cancel
      </button>
      <button 
        type="submit" 
        mat-raised-button 
        color="primary"
        class="submit-btn"
        [disabled]="loading || creditForm.invalid">
        <span *ngIf="!loading">Submit Request</span>
        <span *ngIf="loading" class="loading-text">
          <span class="spinner-small"></span>
          Submitting...
        </span>
      </button>
    </div>

  </form>

</div>
